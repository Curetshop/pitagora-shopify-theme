{%- comment -%}
Multicolumn Section - Pitagora Theme
Display content in customizable columns with images, headings, and text
{%- endcomment -%}

<style>
  #shopify-section-{{ section.id }} {
    --multicolumn-bg: {{ section.settings.background_color | default: 'transparent' }};
    --multicolumn-text: {{ section.settings.text_color | default: 'inherit' }};
    --columns-desktop: {{ section.settings.columns_desktop | default: 3 }};
    --columns-tablet: 2;
    --columns-mobile: 1;
  }
</style>

<div 
  class="multicolumn section-padding multicolumn--{{ section.settings.text_alignment }}"
  style="background: var(--multicolumn-bg); color: var(--multicolumn-text);"
>
  <div class="page-width">
    {%- if section.settings.heading != blank or section.settings.subheading != blank -%}
      <div class="section-header text-center">
        {%- if section.settings.subheading != blank -%}
          <p class="section-header__subheading">{{ section.settings.subheading | escape }}</p>
        {%- endif -%}
        
        {%- if section.settings.heading != blank -%}
          <h2 class="section-header__heading h2">{{ section.settings.heading | escape }}</h2>
        {%- endif -%}
      </div>
    {%- endif -%}

    {%- if section.blocks.size > 0 -%}
      <div class="multicolumn__grid" style="display: grid; grid-template-columns: repeat(var(--columns-desktop), 1fr); gap: 2rem;">
        {%- for block in section.blocks -%}
          <div class="multicolumn__column" {{ block.shopify_attributes }}>
            {%- if block.settings.image != blank -%}
              <div class="multicolumn__image">
                <img
                  src="{{ block.settings.image | image_url: width: 400 }}"
                  alt="{{ block.settings.image.alt | escape }}"
                  loading="lazy"
                  width="{{ block.settings.image.width }}"
                  height="{{ block.settings.image.height }}"
                  sizes="(min-width: 990px) {{ 100 | divided_by: section.settings.columns_desktop }}vw, (min-width: 750px) 50vw, 100vw"
                  srcset="
                    {{ block.settings.image | image_url: width: 200 }} 200w,
                    {{ block.settings.image | image_url: width: 300 }} 300w,
                    {{ block.settings.image | image_url: width: 400 }} 400w,
                    {{ block.settings.image | image_url: width: 500 }} 500w
                  "
                >
              </div>
            {%- endif -%}

            <div class="multicolumn__content">
              {%- if block.settings.title != blank -%}
                <h3 class="multicolumn__title h4">{{ block.settings.title | escape }}</h3>
              {%- endif -%}

              {%- if block.settings.text != blank -%}
                <div class="multicolumn__text rte">
                  {{ block.settings.text }}
                </div>
              {%- endif -%}

              {%- if block.settings.button_text != blank -%}
                <div class="multicolumn__button">
                  <a 
                    href="{{ block.settings.button_url | default: '#' }}" 
                    class="button button--{{ block.settings.button_style }}"
                  >
                    {{ block.settings.button_text | escape }}
                  </a>
                </div>
              {%- endif -%}
            </div>
          </div>
        {%- endfor -%}
      </div>
    {%- else -%}
      <div class="multicolumn__placeholder">
        <p>Add blocks to display content in columns</p>
      </div>
    {%- endif -%}
  </div>
</div>

<style>
  .multicolumn__grid {
    margin-top: 2rem;
  }
  
  .multicolumn__column {
    text-align: var(--text-alignment, left);
  }
  
  .multicolumn--center .multicolumn__column {
    text-align: center;
  }
  
  .multicolumn--right .multicolumn__column {
    text-align: right;
  }
  
  .multicolumn__image {
    margin-bottom: 1.5rem;
  }
  
  .multicolumn__image img {
    width: 100%;
    height: auto;
  }
  
  .multicolumn__title {
    margin-bottom: 1rem;
  }
  
  .multicolumn__text {
    margin-bottom: 1.5rem;
  }
  
  .multicolumn__placeholder {
    text-align: center;
    padding: 2rem;
    border: 2px dashed var(--color-border);
    border-radius: 0.5rem;
  }
  
  @media screen and (max-width: 989px) {
    .multicolumn__grid {
      grid-template-columns: repeat(var(--columns-tablet), 1fr);
      gap: 1.5rem;
    }
  }
  
  @media screen and (max-width: 749px) {
    .multicolumn__grid {
      grid-template-columns: repeat(var(--columns-mobile), 1fr);
      gap: 1rem;
    }
  }
</style>

{% schema %}
{
  "name": "Multicolumn",
  "class": "shopify-section-multicolumn",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Multicolumn"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Desktop columns",
      "min": 1,
      "max": 5,
      "step": 1,
      "default": 3
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color"
    }
  ],
  "blocks": [
    {
      "type": "column",
      "name": "Column",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Column heading"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button text"
        },
        {
          "type": "url",
          "id": "button_url",
          "label": "Button URL"
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "Button style",
          "options": [
            {
              "value": "primary",
              "label": "Primary"
            },
            {
              "value": "secondary",
              "label": "Secondary"
            },
            {
              "value": "outline",
              "label": "Outline"
            }
          ],
          "default": "primary"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Multicolumn",
      "blocks": [
        {
          "type": "column"
        },
        {
          "type": "column"
        },
        {
          "type": "column"
        }
      ]
    }
  ]
}
{% endschema %}