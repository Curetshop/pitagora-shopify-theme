{%- comment -%}
Announcement Bar Section - Pitagora Theme
Barra de anuncios dismissible con links y iconos
{%- endcomment -%}

{%- if section.settings.enable_bar -%}
  {{ 'announcement-bar.css' | asset_url | stylesheet_tag }}
  <script src="{{ 'announcement-bar.js' | asset_url }}" defer="defer"></script>

  <style>
    #shopify-section-{{ section.id }} {
      --announcement-bg: {{ section.settings.background_color }};
      --announcement-text: {{ section.settings.text_color }};
    }
  </style>

  <announcement-bar 
    class="announcement-bar"
    data-section-id="{{ section.id }}"
    data-dismissible="{% if section.settings.show_close %}true{% else %}false{% endif %}"
  >
    <div class="announcement-bar__inner">
      <div class="announcement-bar__content">
        {%- if section.settings.link != blank -%}
          <a href="{{ section.settings.link }}" class="announcement-bar__link">
        {%- endif -%}
        
        <div class="announcement-bar__text">
          {{ section.settings.text | escape }}
        </div>
        
        {%- if section.settings.link != blank -%}
          </a>
        {%- endif -%}
      </div>
      
      {%- if section.settings.show_close -%}
        <button 
          class="announcement-bar__close"
          type="button"
          aria-label="{{ 'accessibility.close' | t }}"
          data-close-announcement
        >
          {% render 'icon-close' %}
        </button>
      {%- endif -%}
    </div>
  </announcement-bar>
{%- endif -%}

{% schema %}
{
  "name": "Announcement bar",
  "class": "shopify-section-announcement-bar",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "Settings"
    },
    {
      "type": "checkbox",
      "id": "enable_bar",
      "label": "Enable announcement bar",
      "default": true
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text",
      "default": "Welcome to our store"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link",
      "info": "Optional. Makes the entire bar clickable."
    },
    {
      "type": "checkbox",
      "id": "show_close",
      "label": "Show close button",
      "default": true,
      "info": "Allow customers to dismiss the announcement"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#1f2937"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#ffffff"
    }
  ],
  "presets": [
    {
      "name": "Announcement bar",
      "settings": {
        "enable_bar": true,
        "text": "ðŸšš Free shipping on orders over $75 | ðŸ“ž 24/7 Support",
        "show_close": true
      }
    }
  ]
}
{% endschema %}