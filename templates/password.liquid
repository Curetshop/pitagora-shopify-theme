<!doctype html>
<html class="no-js" lang="{{ request.locale.iso_code }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="theme-color" content="{{ settings.colors_accent_1 | default: '#121212' }}">
    <link rel="canonical" href="{{ canonical_url }}">
    <link rel="preconnect" href="https://cdn.shopify.com" crossorigin>

    {%- if settings.favicon != blank -%}
      <link rel="icon" type="image/png" href="{{ settings.favicon | image_url: width: 32, height: 32 }}">
    {%- endif -%}

    {%- unless settings.heading_font.system? and settings.body_font.system? -%}
      <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
    {%- endunless -%}

    <title>{{ shop.name }} - {{ 'general.password_page.login_form_heading' | t }}</title>

    {%- if shop.description != blank -%}
      <meta name="description" content="{{ shop.description | escape }}">
    {%- endif -%}

    {%- render 'social-meta-tags' -%}
    {%- render 'css-variables' -%}

    {{ 'password.css' | asset_url | stylesheet_tag }}
    {{ 'base.css' | asset_url | stylesheet_tag }}

    <script>
      document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
    </script>
  </head>

  <body class="password-page">
    <a class="skip-to-content-link button visually-hidden" href="#MainContent">
      {{ 'accessibility.skip_to_content' | t }}
    </a>

    <main id="MainContent" class="password-main" role="main">
      <div class="password-container">
        
        {%- comment -%} Password Header {%- endcomment -%}
        <div class="password-header">
          {%- if shop.logo != blank -%}
            <div class="password-logo">
              <img 
                src="{{ shop.logo | image_url: width: 200 }}"
                alt="{{ shop.name | escape }}"
                width="{{ shop.logo.width }}"
                height="{{ shop.logo.height }}"
                loading="eager"
              >
            </div>
          {%- else -%}
            <h1 class="password-shop-name">{{ shop.name }}</h1>
          {%- endif -%}
        </div>

        {%- comment -%} Store Status Message {%- endcomment -%}
        <div class="password-message">
          <h2 class="password-title">
            {{ 'general.password_page.login_form_heading' | t }}
          </h2>
          
          {%- if shop.password_message != blank -%}
            <div class="password-shop-message rte">
              {{ shop.password_message }}
            </div>
          {%- else -%}
            <p class="password-default-message">
              {{ 'general.password_page.login_form_password_placeholder' | t }}
            </p>
          {%- endif -%}
        </div>

        {%- comment -%} Password Form {%- endcomment -%}
        <div class="password-form-container">
          {%- form 'storefront_password', id: 'login_form', class: 'password-form' -%}
            {%- if form.errors -%}
              <div class="form-status form-status-list form-status-error" tabindex="-1" autofocus>
                {{ form.errors | default_errors }}
              </div>
            {%- endif -%}

            <div class="field">
              <input
                type="password"
                name="password"
                id="Password"
                class="field__input"
                autocomplete="current-password"
                placeholder="{{ 'general.password_page.login_form_password_placeholder' | t }}"
                required
              >
              <label class="field__label" for="Password">
                {{ 'general.password_page.login_form_password_label' | t }}
              </label>
            </div>

            <button type="submit" name="commit" class="password-button button button--primary">
              {{ 'general.password_page.login_form_submit' | t }}
            </button>
          {%- endform -%}

          <div class="password-footer">
            <div class="password-admin-link">
              {{ 'general.password_page.admin_link_html' | t }}
            </div>

            <div class="password-powered">
              {{ 'general.password_page.powered_by_shopify_html' | t }}
            </div>
          </div>
        </div>

      </div>
    </main>

    {%- comment -%} Background Animation {%- endcomment -%}
    <div class="password-background">
      <div class="password-particles"></div>
    </div>

    <script>
      // Password page enhancements
      document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('login_form');
        const passwordInput = document.getElementById('Password');
        
        // Focus password input on load
        if (passwordInput) {
          passwordInput.focus();
        }
        
        // Enhanced form validation
        if (form) {
          form.addEventListener('submit', function(e) {
            const password = passwordInput.value.trim();
            if (!password) {
              e.preventDefault();
              passwordInput.focus();
              passwordInput.classList.add('field__input--error');
            }
          });
        }
        
        // Remove error styling on input
        if (passwordInput) {
          passwordInput.addEventListener('input', function() {
            this.classList.remove('field__input--error');
          });
        }
        
        // Simple particle animation
        const particles = document.querySelector('.password-particles');
        if (particles) {
          for (let i = 0; i < 50; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 20 + 's';
            particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
            particles.appendChild(particle);
          }
        }
      });
    </script>

    <style>
      /* Password page specific styles */
      .password-page {
        background: linear-gradient(135deg, 
          rgb(var(--color-base-background-1)) 0%, 
          rgb(var(--color-base-background-2)) 100%
        );
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: var(--font-body-family);
        overflow: hidden;
        position: relative;
      }
      
      .password-container {
        background: rgba(var(--color-base-background-1), 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(var(--color-base-text), 0.1);
        border-radius: 2rem;
        padding: 4rem;
        max-width: 500px;
        width: 90%;
        text-align: center;
        box-shadow: 0 32px 80px rgba(var(--color-base-text), 0.1);
        position: relative;
        z-index: 10;
      }
      
      .password-header {
        margin-bottom: 3rem;
      }
      
      .password-logo img {
        max-width: 200px;
        height: auto;
      }
      
      .password-shop-name {
        font-size: 3rem;
        font-weight: 600;
        color: rgb(var(--color-base-text));
        margin: 0;
      }
      
      .password-title {
        font-size: 2.4rem;
        font-weight: 600;
        color: rgb(var(--color-base-text));
        margin: 0 0 1.5rem;
      }
      
      .password-shop-message,
      .password-default-message {
        color: rgba(var(--color-base-text), 0.7);
        line-height: 1.6;
        margin-bottom: 3rem;
      }
      
      .password-form {
        margin-bottom: 2rem;
      }
      
      .field {
        position: relative;
        margin-bottom: 2rem;
      }
      
      .field__input {
        width: 100%;
        padding: 1.5rem;
        border: 2px solid rgba(var(--color-base-text), 0.1);
        border-radius: 1rem;
        font-size: 1.6rem;
        background: rgba(var(--color-base-background-1), 0.8);
        color: rgb(var(--color-base-text));
        transition: all 0.3s ease;
      }
      
      .field__input:focus {
        outline: none;
        border-color: rgb(var(--color-base-accent-1));
        box-shadow: 0 0 0 4px rgba(var(--color-base-accent-1), 0.1);
      }
      
      .field__input--error {
        border-color: #e11d48;
        box-shadow: 0 0 0 4px rgba(225, 29, 72, 0.1);
      }
      
      .field__label {
        position: absolute;
        top: 50%;
        left: 1.5rem;
        transform: translateY(-50%);
        color: rgba(var(--color-base-text), 0.5);
        pointer-events: none;
        transition: all 0.3s ease;
        font-size: 1.4rem;
      }
      
      .field__input:focus + .field__label,
      .field__input:not(:placeholder-shown) + .field__label {
        top: -0.5rem;
        left: 1rem;
        font-size: 1.2rem;
        background: rgb(var(--color-base-background-1));
        padding: 0 0.5rem;
        color: rgb(var(--color-base-accent-1));
      }
      
      .password-button {
        width: 100%;
        padding: 1.5rem;
        background: rgb(var(--color-base-accent-1));
        color: rgb(var(--color-base-solid-button-labels));
        border: none;
        border-radius: 1rem;
        font-size: 1.6rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      
      .password-button:hover {
        background: rgba(var(--color-base-accent-1), 0.9);
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(var(--color-base-accent-1), 0.3);
      }
      
      .password-footer {
        border-top: 1px solid rgba(var(--color-base-text), 0.1);
        padding-top: 2rem;
        margin-top: 2rem;
      }
      
      .password-admin-link,
      .password-powered {
        color: rgba(var(--color-base-text), 0.5);
        font-size: 1.3rem;
        margin-bottom: 1rem;
      }
      
      .password-admin-link a,
      .password-powered a {
        color: rgb(var(--color-base-accent-1));
        text-decoration: none;
      }
      
      .password-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        overflow: hidden;
      }
      
      .particle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: rgba(var(--color-base-accent-1), 0.3);
        border-radius: 50%;
        animation: float linear infinite;
      }
      
      @keyframes float {
        from {
          transform: translateY(100vh) rotate(0deg);
        }
        to {
          transform: translateY(-10vh) rotate(360deg);
        }
      }
      
      .form-status-error {
        background: rgba(225, 29, 72, 0.1);
        color: #e11d48;
        padding: 1rem 1.5rem;
        border-radius: 0.8rem;
        margin-bottom: 2rem;
        border: 1px solid rgba(225, 29, 72, 0.2);
      }
      
      @media (max-width: 768px) {
        .password-container {
          padding: 2rem;
          width: 95%;
        }
        
        .password-title {
          font-size: 2rem;
        }
        
        .password-shop-name {
          font-size: 2.4rem;
        }
      }
    </style>
  </body>
</html>